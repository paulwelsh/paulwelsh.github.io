<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="8" MadCap:lastHeight="2432" MadCap:lastWidth="946">
    <head>
        <link href="../Resources/Stylesheets/Styles.css" rel="stylesheet" />
    </head>
    <body>
        <h2>Variables Notes</h2>
        <p>eSellerate variables are essential components of both Custom Layouts and the eSellerate Embedded Web Store SDK. The many uses for eSellerate variables include store functions such as adding a SKU to the shopping cart, and SDK functions such as purchasing software from inside the application.</p>
        <p class="pwNote"><span class="strong">Note:</span> This help topic describes defined eSellerate variables. There are two other kinds of eSellerate variables—arbitrary (ad hoc) and string—that you can use in addition to eSellerate variables. For more information on the other two types of variables, see <MadCap:xref href="Layouts_AdHoc.htm" target="" title="" alt="">Ad Hoc Variables</MadCap:xref> and <MadCap:xref href="../Miscellaneous/LocalizingStores.htm" target="" title="" alt="">Localizing  Stores</MadCap:xref>.</p>
        <h3>Finding Information on eSellerate Variables</h3>
        <p>The primary resources for eSellerate variables information are as follows:</p>
        <ul>
            <li>Variables help pages <ul><li>For a listing of all eSellerate variables that can be used with Custom Layouts, use the link displayed on the Text File Editor page when you edit individual HTML layout files, or use the following URL: <a><a href="http://publishers.esellerate.net/customvar.aspx" target="_blank">http://publishers.esellerate.net/customvar.aspx</a></a>. </li><li>For a listing of all eSellerate variables that Embedded Web Store eSellers can prefill or pull from result data, use the link displayed on the code samples page (accessible from the API section of the Embedded Web Store eSeller Summary page), or use the following URL: <a><a href="http://publishers.esellerate.net/embeddedvar.aspx" target="_blank">http://publishers.esellerate.net/embeddedvar.aspx</a></a>. <ul><li>All Embedded Web Store eSellers can set a variable's value through prefill and read a variable's value from result data, except for those eSellers that are integrated with REALbasic applications. The Embedded Web Store option for REALbasic does not support these actions.</li></ul></li><li>Also note: <ul><li>For your convenience when working on layouts that you have downloaded from <MadCap:variable name="Primary.CompanyName" />, the variables help pages are accessible  without logging in to your publisher account. </li><li>Both of these pages allow exporting the variables information as a comma-separated file. </li><li>To view variables help, hover your mouse over the variable name, or click the bullet to the left of the variable. </li><li>"Required" indicates that a variable must be in the layout to enable <MadCap:variable name="Primary.CompanyName" /> store functionality. Note that some variables are required only under certain conditions; see variables help for more information. </li><li>"Can Edit" indicates that a variable's value can be set on a Custom Layout page by the user. Some variables that can be edited by the user cannot be prefilled, and vice versa. </li><li>"Can Prefill" indicates that a variable's value can be set through prefill. Some variables that can be prefilled cannot be edited by the user, and vice versa. </li><li>"Loop Only" indicates that the variable can only be used within eSellerate &lt;_Loop&gt; tags. See the Tags page for more information. </li><li>"In Result" indicates that a variable's value is returned to the eSellerate Embedded Web Store SDK, and is therefore available for retrieval through SDK calls. </li><li>"Page" indicates that the variable can only be used on the specified layout page. </li><li>"New" indicates that  eSellerate added the variable  in the most recent variables update. </li></ul></li></ul></li>
            <li>The Tags page <ul><li>The Tags page shows how the following eSellerate HTML extensions work in conjunction to extend the functionality of standard HTML: <ul><li>Commands </li><li>Tags</li><li>Variables </li></ul></li><li>To view the Tags page, use the following URL: <a><a href="http://publishers.esellerate.net/tags.aspx" target="_blank">http://publishers.esellerate.net/tags.aspx</a></a>. </li></ul></li>
            <li>HTML files in the default layouts<ul><li>The numerous HTML files included with every default layout provide working examples of variables usage. Be sure to review the extensive comments in the HTML code.</li></ul></li>
        </ul>
        <h3><a name="Layouts_2469577869_78668"></a>Notes on Using eSellerate Variables</h3>
        <ul>
            <li>The red bullet for required fields will display automatically at runtime for all required variables. These include variables marked "Required" on the variables help pages, and variables that you have made required (as explained below). </li>
            <li>
                <MadCap:keyword term="variables:making required;Custom Layouts:making variables required" />You can make any variable (including one of your own) required. For more information, see the "Input Validation" section of the Tags page at <a href="http://publishers.esellerate.net/tags.aspx" target="_blank">http://publishers.esellerate.net/tags.aspx</a>.</li>
            <li>Values can be directly assigned to variables—either defined or ad hoc—by using the assignment operator "=", when the assignments are enclosed in eSellerate &lt;_OnLoad&gt; or &lt;_OnPost&gt; tags. For more information, see <MadCap:xref href="Layouts_AssignmentSt.htm" target="" title="" alt="">Assignment Statements</MadCap:xref>.</li>
            <li>All rate fields, such as for the variable _Cart.TaxRate, will automatically include a percent sign. </li>
            <li>For customer privacy reasons, the value returned for the variable _Shopper.PaymentCardNumber will only show the last four digits of the card number. </li>
            <li>
                <MadCap:keyword term="variables:_Custom.Data variables;Custom Layouts:_Custom.Data variables" />There are 20 variables reserved for you to use as needed for collecting data. The variable names are _Custom.Data0 through _Custom.Data19. Also note:<ul><li>The _Custom.Data variables are strings with a limit of 4,000 characters.</li><li><MadCap:variable name="Primary.CompanyName" /> provides three options for viewing or accessing the _Custom.Data variables returned in orders:<ul><li>The XML order notice (available through Account Information)</li><li>The Order Detail page (available through any search or report that lists orders)</li><li>The Order Lookup Web Service (see <MadCap:xref href="../Account_Management/Account_XML.htm" target="" title="" alt="">Using the XML Order Notice</MadCap:xref>)</li></ul></li><li>Do not use _Custom.Data variables on receipt pages. Instead, use one of the <MadCap:keyword term="variables:_Order.CustomData variables;Custom Layouts:_Order.CustomData variables" />20 reserved _Order.CustomData variables (named _Order.CustomData0 through _Order.CustomData19), which are the receipt page equivalents of _CustomData variables. For example, if you use _Custom.Data4 to receive and store customer input during a purchase, you would display that data on the receipt page with _Order.CustomData4. The _Order.CustomData variables allow receipts to show custom data after the purchase session has ended, so customers will be able to view that information when looking up their orders in After-Purchase Services. </li></ul></li>
            <li>Variables listed as type "Link" create hyperlinks, and are represented as one variable per link. At runtime, these links will render the required label and URL associated with the variable. They will always open a new browser window when clicked. </li>
            <li>To display text such as "FREE SHIPPING" when a coupon provides that discount, you can base a condition on the value of _Shopper.CouponType, which will be SHIPPING if shipping is free. </li>
            <li>You can use _Layout.PreviousPage to create Back button functionality. The variable will return blank if there is no previous page. Also note: <ul><li>The button can be hidden via _visible="Layout.Previouspage!=" </li><li>An example of a visible back button follows: &lt;input name="submit01" type="submit" value="back" calls="inputSubmit" _cmd="goto" _page="_Layout.PreviousPage"&gt; </li></ul></li>
            <li>To display a More Info link for a catalog item, your code will need to do the following: <ol><li>Check the value of _CatalogItem.MoreInfoIsAvailable. If the value is true, continue with the next step. </li><li>Create a link to the page designated as Catalog More Info Page on the Settings tab. The name of that page is accessible through _Layout.CatalogMoreInfoPage. (Alternately, you can link to any page that is set up to display the required information.) </li></ol></li>
            <li>To display a More Info link for a cross-sell item, your code will need to do the following: <ol><li>Check the value of _CrossSellItem.MoreInfoIsAvailable. If the value is true, continue with the next step. </li><li>Check the value of _CrossSellItem.MoreInfoExternalURL. If the value is true, create a link using the target URL that is accessible through _CrossSellItem.MoreInfoExternalURL. If the value is false, create a link to the page designated as Catalog More Info Page on the Settings tab. The name of that page is accessible through _Layout.CatalogMoreInfoPage. (Alternately, you can link to any page that is set up to display the required information.) </li></ol></li>
            <li>When using prefill to add an item to the shopping cart and apply a coupon, including _eSellerate.Options prefilled with "PREVALIDATECOUPON" instructs <MadCap:variable name="Primary.CompanyName" /> to validate the coupon immediately, rather than at the next form post. This allows the discounted amount to display immediately, if included on the layout page. Also note: <ul><li>To accomplish the same immediate validation with a "Buy" URL for an  <![CDATA[ ]]><MadCap:variable name="Primary.CompanyName" /> web store that uses Custom Layouts, include "&amp;options=PREVALIDATECOUPON" in the URL. Also see <MadCap:xref href="../Advanced_Sales_Options/Advanced_PrefillCoupon.htm" target="" title="" alt="">Prefilling Coupon ID</MadCap:xref>. </li><li>Do not use this option for coupons that require user input, such as adding more items to the cart or entering an e-mail address used for previous purchases. Coupons such as these that <MadCap:variable name="Primary.CompanyName" /> cannot immediately validate will cause errors. </li></ul></li>
            <li>When using prefill to add an item to the shopping cart, including _eSellerate.Options prefilled with "CLEARCART" instructs <MadCap:variable name="Primary.CompanyName" /> to clear the cart before adding the new item.</li>
            <li>Variables can be conditional as to when they are required and visible to the customer. (See the variables help pages for information on which variables are conditionally required.) Some variables have built-in capabilities for knowing when they don't pertain, which saves you from having to conditionally hide them with &lt;span _ if="_variable"&gt; logic. The variables with these capabilities are as follows: <ul><li>_Cart.GrandTotal </li><li>_Cart.CurrencyMessage </li><li>_Cart.TransactionMessage </li><li>_CartItem.SerialNumberPromptedData </li><li>_Shipping.ECDShippingMessage </li><li>_Shipping.SelectedShippingRefNum </li><li>_ShippingItem.Amount </li><li>_ShippingItem.Description </li><li>_Shopper.PaymentCardCSC </li><li>_Shopper.PaymentCardMonth </li><li>_Shopper.PaymentCardNumber </li><li>_Shopper.PaymentCardYear </li><li>_Shopper.ShippingAddress1 </li><li>_Shopper.ShippingCity </li><li>_Shopper.ShippingCountry </li><li>_Shopper.ShippingFirstName </li><li>_Shopper.ShippingLastName </li><li>_Shopper.ShippingState </li><li>_Shopper.ShippingZip </li><li>_Shopper.VatID </li><li>Images/_AcceptedPayments.gif </li><li>Images/_SSL.gif </li><li>Images/_Trustmark.gif </li></ul></li>
            <li>Some variables return empty strings when unavailable or inappropriate. This applies to the following link variables (which are all optional): <ul><li>_CartItem.ECDAvailableLink </li><li>_CartItem.EDSAvailableLink </li><li>_CartItem.SerialNumberPromptHelpLink </li><li>_CartItem.VolumeDiscountLink </li><li>_CatalogItem.VolumeDiscountLink </li><li>_eSeller.PrivacyPolicyLink </li><li>_eSeller.ReturnPolicyLink </li></ul></li>
            <li>To ensure that data is available when needed, variables placement in layouts must reflect current Sales Manager store settings. A few examples related to coupons are: <ul><li>Coupon entry should occur after all SKUs eligible for the coupon discount are already in the shopping cart. </li><li>Coupon entry should occur before the presentation of shipping costs. </li></ul></li>
        </ul>
        <h3 class="See_Also">See Also</h3>
        <p>
            <MadCap:xref href="Layouts_AdHoc.htm" target="" title="" alt="">Ad Hoc Variables</MadCap:xref>
        </p>
        <p>
            <MadCap:xref href="Layouts_CustomReceiptPag.htm" target="" title="" alt="">Receipt Page Notes</MadCap:xref>
        </p>
    </body>
</html>